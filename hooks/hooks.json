{
    "hooks": {
        "SessionStart": [{
            "matcher": "startup",
            "hooks": [{
                "name": "session-skills",
                "type": "command",
                "command": "python3 ${extensionPath}${/}hooks${/}session-start.py",
                "description": "Inject skill catalog and skill-first protocol",
                "timeout": 10000
            }]
        }],
        "BeforeAgent": [{
            "matcher": "*",
            "hooks": [{
                "name": "prompt-suggest",
                "type": "command",
                "command": "python3 ${extensionPath}${/}hooks${/}before-agent.py",
                "description": "Detect >>prompt syntax and provide context",
                "timeout": 5000
            }]
        }],
        "BeforeTool": [{
            "matcher": "prompt_engine",
            "hooks": [{
                "name": "gate-enforce",
                "type": "command",
                "command": "python3 ${extensionPath}${/}hooks${/}gate-enforce.py",
                "description": "Block prompt_engine calls with FAIL verdicts or missing gate responses",
                "timeout": 5000
            }]
        }],
        "AfterTool": [
            {
                "matcher": "prompt_engine",
                "hooks": [{
                    "name": "chain-tracker",
                    "type": "command",
                    "command": "python3 ${extensionPath}${/}hooks${/}after-tool.py",
                    "description": "Track chain state and pending gates",
                    "timeout": 5000
                }]
            },
            {
                "matcher": "write_file|replace|bash|task_tool",
                "hooks": [{
                    "name": "ralph-context-tracker",
                    "type": "command",
                    "command": "python3 ${extensionPath}${/}hooks${/}ralph-context-tracker.py",
                    "description": "Track file changes and tool usage for Ralph loops",
                    "timeout": 5000
                }]
            }
        ],
        "PreCompress": [{
            "matcher": "manual|auto",
            "hooks": [{
                "name": "pre-compact",
                "type": "command",
                "command": "python3 ${extensionPath}${/}hooks${/}pre-compact.py",
                "description": "Preserve chain state across compression",
                "timeout": 5000
            }]
        }],
        "SessionEnd": [{
            "matcher": "exit|clear|logout|prompt_input_exit|other",
            "hooks": [{
                "name": "ralph-stop",
                "type": "command",
                "command": "python3 ${extensionPath}${/}hooks${/}stop.py",
                "description": "Shell verification loop control"
            }]
        }]
    }
}
